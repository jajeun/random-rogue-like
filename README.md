# 로그라이크 게임

터미널에서 즐기는 간단한 로그라이크 게임입니다.

## 🌟 주요 기능

-   **절차적 생성 던전:** 매번 새로운 구조의 던전을 탐험하며 긴장감을 유지합니다.
-   **턴 기반 전투:** 신중한 선택이 중요한 전략적인 턴 기반 전투 시스템을 채택했습니다.
-   **다양한 전투 선택지:** 단순 공격 외에 높은 리턴을 기대할 수 있는 '연속 공격', 피해를 무효화하고 반격하는 '방어', 위기 상황을 벗어나는 '도망' 등 다양한 선택지를 제공하여 전략의 깊이를 더했습니다.
-   **두뇌 자극 수학 퍼즐:** 전투 후 보너스 스테이지로 '수학 퍼즐' 미니게임을 구현했습니다. 주어진 숫자와 연산자를 조합하여 목표 숫자를 만드는 방식으로, 성공 시 플레이어에게 강력한 보상을 제공합니다.
-   **영구적인 성장:** 매 스테이지 클리어 후 퍼즐 결과를 통해 얻는 보상으로 캐릭터를 영구적으로 성장시켜 다음 스테이지를 대비할 수 있습니다.

## 🚀 시작하는 방법

**요구 사항:**

-   [Node.js](https://nodejs.org/) (v18 이상 권장)
-   `chalk`, `readline-sync` 라이브러리

1.  **저장소 복제 및 이동:**

    ```bash
    git clone https://github.com/your-username/random-rogue-like.git
    cd random-rogue-like
    ```

2.  **의존성 설치:**

    ```bash
    npm install
    ```

3.  **게임 실행:**

    ```bash
    node game.js
    ```

## 🎮 게임 방법

-   **목표:** 총 10개의 스테이지를 클리어하고 최종 보스를 물리치는 것이 목표입니다.
-   **전투:** 매 스테이지마다 새로운 몬스터와 조우하며, 턴마다 4가지 행동(공격, 연속 공격, 방어, 도망) 중 하나를 선택하여 전투를 진행합니다.
-   **수학 퍼즐:** 스테이지 클리어 후, 이전 전투에서 잃은 체력과 연계된 보상을 걸고 수학 퍼즐에 도전하게 됩니다. 주어진 숫자와 연산자를 조합하여 목표 숫자를 만드는 수식을 완성해야 합니다. 결과에 따라 보상이 차등 지급됩니다.
-   **성장:** 퍼즐 보상으로 체력을 회복하거나, 공격력, 연속 공격 확률, 방어 확률, 도망 확률 등 다양한 능력치를 영구적으로 강화할 수 있습니다.

## 💻 개발 과정 및 주요 로직

### 전투 시스템 구현

-   **개발 초기:** 단순한 공격/피해 교환 방식에서 시작했습니다.
-   **어려움 및 해결:** 게임이 단조롭다는 문제를 해결하기 위해 '연속 공격', '방어', '도망'과 같은 확률 기반의 선택지를 추가했습니다. 각 선택지에 성공/실패 확률을 부여하여 매 턴 플레이어의 선택이 긴장감과 재미를 유발하도록 설계했습니다. 예를 들어, '방어' 성공 시 피해 무효화 및 반격이라는 높은 보상을 제공하여 위험을 감수할 만한 가치를 부여했습니다.

### 수학 퍼즐 미니게임 구현

-   **핵심 로직:** `mathPuzzle.js` 파일의 `generateTargetPuzzle` 함수가 핵심입니다.
    1.  **문제 생성:** 1~9 사이의 중복 없는 숫자 4개와 사칙연산자 3개를 무작위로 선택합니다.
    2.  **해답 보장 로직:** 생성된 숫자와 연산자를 스택(Stack) 자료구조와 유사한 방식으로 조합하여 '타겟 숫자'를 먼저 계산합니다. 이 방식을 통해 **항상 풀이가 존재하는 퍼즐**을 생성할 수 있도록 보장하는 것이 핵심적인 어려움이었고, 이를 해결하여 게임의 완성도를 높였습니다.
    3.  **`eval()` 사용:** 사용자로부터 입력받은 수식을 동적으로 계산하기 위해 `eval()` 함수를 사용했습니다. 보안상 취약점이 될 수 있지만, 로컬 환경에서 실행되는 간단한 CLI 게임의 특성을 고려하여 간편성을 위해 채택했습니다. 입력값이 수식이 아닐 경우를 대비한 예외 처리 로직을 추가하여 안정성을 확보했습니다.
-   **보상 시스템:** 퍼즐 결과(정답, 근접, 실패)에 따라 보상 계수(`v`)를 차등 적용하여, 플레이어의 노력에 대한 합리적인 보상을 제공하도록 설계했습니다. 이 보상을 통해 플레이어는 다음 스테이지에 대한 준비를 할 수 있습니다.

## 📝 향후 추가 개발 계획

아직 미정